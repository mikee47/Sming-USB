{
    "$schema": "http://json-schema.org/draft/2020-12/schema#",
    "$ref": "#/$defs/UsbConfig",
    "$defs": {
        "UsbConfig": {
            "title": "USB Configuration",
            "description": "",
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "devices": {
                    "$ref": "#/$defs/Devices"
                },
                "host": {
                    "title": "Host Interfaces",
                    "description": "Number of interfaces of each class required",
                    "type": "object",
                    "$ref": "#/$defs/HostInterface"
                }
            }
        },
        "HostInterface": {
            "title": "Host Interface definition",
            "description": "Defines how many interface instances each class type supports",
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "hub": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "count": {
                            "type": "integer",
                            "default": 1,
                            "min": 0
                        }
                    }
                },
                "hid": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "count": {
                            "type": "integer",
                            "min": 0
                        }
                    },
                    "required": [
                        "count"
                    ]
                },
                "cdc": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "count": {
                            "type": "integer",
                            "min": 0
                        },
                        "line-control-on-enum": {
                            "title": "Set Line Control state on enumeration/mounted: DTR ( bit 0), RTS (bit 1)",
                            "global": true,
                            "type": "integer",
                            "default": 0,
                            "min": 0,
                            "max": 3
                        },
                        "rx-bufsize": {
                            "global": true,
                            "type": "integer",
                            "default": "TUD_OPT_HIGH_SPEED ? 512 : 64",
                            "min": 64
                        },
                        "tx-bufsize": {
                            "global": true,
                            "type": "integer",
                            "default": "TUD_OPT_HIGH_SPEED ? 512 : 64",
                            "min": 64
                        }
                    },
                    "required": [
                        "count"
                    ]
                },
                "msc": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "count": {
                            "type": "integer",
                            "min": 0
                        },
                        "ep-bufsize": {
                            "global": true,
                            "type": "integer",
                            "default": 512,
                            "min": 64
                        }
                    },
                    "required": [
                        "count"
                    ]
                },
                "vendor": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "count": {
                            "type": "integer",
                            "min": 0
                        }
                    },
                    "required": [
                        "count"
                    ]
                }
            }
        },
        "Devices": {
            "title": "Devices",
            "type": "object",
            "additionalProperties": false,
            "patternProperties": {
                "^[A-Za-z_][A-Za-z0-9_]*$": {
                    "type": "object",
                    "$ref": "#/$defs/Device"
                }
            }
        },
        "Device": {
            "title": "Device",
            "description": "Standard device information fields",
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "class": {
                    "type": "string",
                    "default": "misc"
                },
                "subclass": {
                    "type": "string",
                    "default": "common"
                },
                "protocol": {
                    "type": "string",
                    "default": "iad"
                },
                "vendor_id": {
                    "type": "string"
                },
                "product_id": {
                    "type": "string",
                    "default": "USB_PID"
                },
                "version": {
                    "type": "string",
                    "default": "1.0"
                },
                "manufacturer": {
                    "type": "string"
                },
                "product": {
                    "type": "string"
                },
                "serial": {
                    "type": "string"
                },
                "configs": {
                    "$ref": "#/$defs/Configs"
                }
            },
            "required": [
                "vendor_id",
                "manufacturer",
                "product",
                "serial",
                "configs"
            ]
        },
        "Configs": {
            "title": "Configs",
            "type": "object",
            "additionalProperties": false,
            "patternProperties": {
                "^[A-Za-z_][A-Za-z0-9_]*$": {
                    "type": "object",
                    "$ref": "#/$defs/Config"
                }
            }
        },
        "Config": {
            "title": "Config",
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "description": {
                    "type": "string",
                    "default": ""
                },
                "attributes": {
                    "type": "array",
                    "items": {
                        "enum": [
                            "remote-wakeup",
                            "self-powered"
                        ]
                    },
                    "default": [
                        "remote-wakeup"
                    ]
                },
                "power": {
                    "type": "integer"
                },
                "interfaces": {
                    "title": "Interfaces",
                    "type": "object",
                    "additionalProperties": false,
                    "patternProperties": {
                        "^[A-Za-z_][A-Za-z0-9_]*$": {
                            "$ref": "#/$defs/Interfaces"
                        }
                    }
                }
            },
            "required": [
                "interfaces",
                "power"
            ]
        },
        "Interfaces": {
            "oneOf": []
        }
    }
}