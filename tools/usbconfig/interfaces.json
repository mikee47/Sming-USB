{
    "hid": {
        "class": "hid",
        "description": "HID Input only descriptor",
        "schema": {
            "properties": {
                "protocol": {
                    "default": "none",
                    "enum": [
                        "none",
                        "keyboard",
                        "mouse"
                    ]
                },
                "bufsize": {
                    "type": "integer",
                    "default": "HID_DEFAULT_EP_BUFSIZE",
                    "minimum": 4,
                    "maximum": 512
                },
                "poll-interval": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 255
                },
                "reports": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "poll-interval",
                "reports"
            ]
        },
        "fields": {
            "description": "${itf.get('description', '')}",
            "Protocol": "HID_ITF_PROTOCOL_{make_id(itf.get('protocol', 'none'))}",
            "Report descriptor len": "sizeof(desc_{itf_tag}_report)",
            "EP IN": "@",
            "Size": "{itf.get('bufsize', 'HID_DEFAULT_EP_BUFSIZE')}",
            "Polling interval": "{itf['poll-interval']}"
        }
    },
    "hid-inout": {
        "class": "hid",
        "description": "HID Input & Output descriptor",
        "schema": {
            "properties": {
                "protocol": {
                    "default": "none",
                    "enum": [
                        "none",
                        "keyboard",
                        "mouse"
                    ]
                },
                "bufsize": {
                    "type": "integer",
                    "default": "HID_DEFAULT_EP_BUFSIZE",
                    "minimum": 4,
                    "maximum": 512
                },
                "poll-interval": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 255
                },
                "reports": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "bufsize",
                "poll-interval",
                "protocol",
                "reports"
            ]
        },
        "fields": {
            "description": "${itf.get('description', '')}",
            "Protocol": "HID_ITF_PROTOCOL_{make_id(itf.get('protocol', 'none'))}",
            "Report descriptor len": "sizeof(desc_{itf_tag}_report)",
            "EP OUT": "@",
            "EP IN": "@",
            "Size": "{itf.get('bufsize', 'HID_DEFAULT_EP_BUFSIZE')}",
            "Polling interval": "{itf['poll-interval']}"
        }
    },
    "cdc": {
        "class": "cdc",
        "description": "CDC Descriptor Template",
        "schema": {},
        "fields": {
            "description": "${itf.get('description', '')}",
            "EP notify IN": "@",
            "EP notify size": 8,
            "EP data OUT": "@",
            "EP data IN": "@",
            "EP data size": 64
        },
        "itf_count": 2 // CDC, CDC_DATA
    },
    "midi": {
        "class": "midi",
        "description": [
            "MIDI simple descriptor",
            " - 1 Embedded Jack In connected to 1 External Jack Out",
            " - 1 Embedded Jack out connected to 1 External Jack In"
        ],
        "schema": {},
        "fields": {
            "description": "${itf.get('description', '')}",
            "EP Out": "@",
            "EP In": "@",
            "EP size": "TUD_OPT_HIGH_SPEED ? 512 : 64"
        },
        "itf_count": 2 // Audio Control (AC), MIDI Streaming (MS)
    },
    "msc": {
        "class": "msc",
        "description": "MSC Descriptor Template",
        "schema": {
            "properties": {
                "vendor": {
                    "type": "string"
                },
                "product": {
                    "type": "string"
                },
                "version": {
                    "type": "string",
                    "format": "integer"
                }
            },
            "required": [
                "product",
                "vendor",
                "version"
            ]
        },
        "fields": {
            "description": "${itf.get('description', '')}",
            "EP Out": "@",
            "EP In": "@",
            "EP Size": 64
        }
    },
    "audio-mic-one-ch": {
        "class": "audio",
        "description": [
            "AUDIO simple descriptor (UAC2) for 1 microphone input",
            " - 1 Input Terminal, 1 Feature Unit (Mute and Volume Control), 1 Output Terminal, 1 Clock Source"
        ],
        "schema": {},
        "fields": {
            "description": "${itf.get('description', '')}",
            "Bytes Per Sample": "{itf['bytes-per-sample']}",
            "Bits Used Per Sample": "{itf['bits-used-per-sample']}",
            "EP IN": "@",
            "EP Size": "CFG_TUD_AUDIO_EP_SZ_IN"
        },
        "itf_count": 2 // Audio Control (AC), Audio Streaming (AS)
    },
    "audio-mic-four-ch": {
        "class": "audio",
        "description": [
            "AUDIO simple descriptor (UAC2) for 4 microphone input",
            " - 1 Input Terminal, 1 Feature Unit (Mute and Volume Control), 1 Output Terminal, 1 Clock Source"
        ],
        "schema": {},
        "fields": {
            "description": "${itf.get('description', '')}",
            "Bytes Per Sample": "{itf['bytes-per-sample']}",
            "Bits Used Per Sample": "{itf['bits-used-per-sample']}",
            "EP IN": "@",
            "EP Size": "CFG_TUD_AUDIO_EP_SZ_IN"
        },
        "itf_count": 2 // Audio Control (AC), Audio Streaming (AS)
    },
    "audio-speaker-mono-fb": {
        "class": "audio",
        "description": [
            "AUDIO simple descriptor (UAC2) for mono speaker",
            " - 1 Input Terminal, 2 Feature Unit (Mute and Volume Control), 3 Output Terminal, 4 Clock Source"
        ],
        "schema": {},
        "fields": {
            "description": "${itf.get('description', '')}",
            "Bytes Per Sample": "{itf['bytes-per-sample']}",
            "Bits Used Per Sample": "{itf['bits-used-per-sample']}",
            "EP OUT": "@",
            "EP Size": "CFG_TUD_AUDIO_EP_SZ_OUT",
            "EP FB IN": "@"
        },
        "itf_count": 2 // Audio Control (AC), Audio Streaming (AS)
    },
    "vendor": {
        "class": "vendor",
        "description": "Vendor Descriptor Template",
        "schema": {},
        "fields": {
            "description": "${itf.get('description', '')}",
            "EP OUT": "@",
            "EP IN": "@",
            "EP Size": "TUD_OPT_HIGH_SPEED ? 512 : 64"
        }
    },
    "dfu_rt": {
        "class": "dfu",
        "description": "DFU runtime descriptor",
        "schema": {},
        "fields": {
            "description": "${itf.get('description', '')}",
            "Attributes": "{itf['attributes']}",
            "Detach Timeout": "{itf['detach-timeout']}",
            "Transfer Size": "{itf['transfer-size']}"
        }
    },
    "dfu": {
        "class": "dfu",
        "description": "DFU Descriptor Template",
        "schema": {
            "properties": {
                "alternates": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "alternates"
            ]
        },
        "fields": {
            "Alternate count": "{len(itf['alternates'])}",
            "description": "${itf['alternates']}",
            "Attributes": "{' | '.join(f'DFU_ATTR_{make_id(a)}' for a in itf.get('attributes', DFU_DEFAULT_ATTR))}",
            "Detach timeout": 1000,
            "Transfer size": "CFG_TUD_DFU_XFER_BUFSIZE"
        },
        "desc-len": "TUD_DFU_DESC_LEN({len(itf['alternates'])})"
    },
    "cdc-ecm": {
        "class": "ecm-rndis",
        "description": "CDC-ECM Descriptor Template",
        "schema": {},
        "fields": {
            "description": "${itf.get('description', '')}",
            "MAC address": "$",
            "EP Notify IN": "@",
            "EP Notify Size": 64,
            "EP Data OUT": "@",
            "EP Data IN": "@",
            "EP Data Size": "CFG_TUD_NET_ENDPOINT_SIZE",
            "Max Segment Size": "CFG_TUD_NET_MTU"
        },
        "itf-count": 2 // CDC Control, CDC Data
    },
    "rndis": {
        "class": "ecm-rndis",
        "description": "RNDIS Descriptor Template",
        "schema": {},
        "fields": {
            "description": "${itf.get('description', '')}",
            "EP Notify IN": "@",
            "EP Notify Size": 64,
            "EP Data OUT": "@",
            "EP Data IN": "@",
            "EP Data Size": "CFG_TUD_NET_ENDPOINT_SIZE"
        },
        "itf-count": 2 // CDC Control, CDC Data
    },
    "cdc-ncm": {
        "class": "ncm",
        "description": "CDC-ECM Descriptor Template",
        "schema": {},
        "fields": {
            "description": "${itf.get('description', '')}",
            "MAC address": "$",
            "EP Notify IN": "@",
            "EP Notify Size": 64,
            "EP Data OUT": "@",
            "EP Data IN": "@",
            "EP Data Size": "CFG_TUD_NET_ENDPOINT_SIZE",
            "Max Segment Size": "CFG_TUD_NET_MTU"
        },
        "itf-count": 2 // CDC Control, CDC Data
    }
}