USB
===

Sming library for TinyUSB.

TinyUSB currently offers good support for devices, with more limited Host support.
At present, there is no host support for Esp32 (only Rp2040).


Device stack
------------

The TinyUSB example applications generally consist of these three things:

tusb_config.h
    Contains definitions such as which classes are supported, how many endpoints (each),
    buffer sizes, etc.

usb_descriptors.c
    Provides descriptor structure definitions and implements required callbacks to provide
    these to the TinyUSB stack.

main.c
    Implements class-specific callbacks.

Applications may choose to use the raw TinyUSB API; this is demonstrated in the :sample:`HID_Composite_Device` sample,
which has been ported directly from the corresponding TinyUSB example.

A drawback of this approach is that the configuration files have to be composed manually,
which requires some knowledge of TinyUSB and can also be error-prone.
Instead, the configuration can be described in a JSON file and the configuration generated by the library.
This is demonstrated in the :sample:`Basic_Device` sample.

However, a primary goal for this library is to can generate the required configuration files ()

There's quite a bit of work involved in getting this right, even for standard classes,
and there is much that could be automated by a build script which translates the user
requirements (probably JSON) into the appropriate structures and code templates.

The tool would also validate the specification against the target hardware.

In addition, the JSON specification could be created/edited using a graphical tool,
much like was done for the Storage partition editor.

The library should also provide wrapper classes for inspecting and generating low-level
USB structures, handling byte-ordering and other such detail.

Finally, the user code would be written as C++ class implementations, with the library
taking care of the callback implementations.

This extended behaviour is enabled only when the application sets :envvar:`USB_CONFIG`.
If not set, then the application can continue to use raw tinyusb code.


Host stack
----------

Supported classes must be declared 


Notes
-----

TinyUSB requires various global callback functions to be implemented.
TinyUSB defines optional ones as WEAK to avoid calling them when not implemented.

This, together with the large number of configuration variables, means it is more appropriate
to have tinyusb built with the application rather than a separate library.
